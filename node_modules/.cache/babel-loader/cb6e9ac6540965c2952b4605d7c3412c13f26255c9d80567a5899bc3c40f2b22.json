{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AdminPage(){const[events,setEvents]=useState([]);const[inputs,setInputs]=useState({});const[result,setResult]=useState(\"\");// Fetch events from the backend\nconst fetchEvents=async()=>{try{const res=await fetch(\"https://nsbe-react-website-backend.onrender.com/api/events\");if(!res.ok){throw new Error(`Failed to fetch events: ${res.statusText}`);}const data=await res.json();setEvents(data);}catch(err){console.error(\"Error fetching events:\",err);setResult(\"Failed to load events. Please try again.\");}};// Fetch events on component mount\nuseEffect(()=>{fetchEvents();},[]);// Handle text input changes\nconst handleChange=e=>{const name=e.target.name;const value=e.target.value;setInputs(prevInputs=>({...prevInputs,[name]:value}));};// Handle image file selection\nconst handleImageChange=e=>{const name=e.target.name;const file=e.target.files[0];setInputs(prevInputs=>({...prevInputs,[name]:file}));};// Add event to server\nconst addEventToServer=async e=>{e.preventDefault();setResult(\"Sending...\");const formData=new FormData();for(const key in inputs){formData.append(key,inputs[key]);}try{const res=await fetch(\"https://nsbe-react-website-backend.onrender.com/api/events\",{method:\"POST\",body:formData});if(!res.ok){throw new Error(\"Failed to add event\");}const data=await res.json();setResult(\"Event successfully added!\");setInputs({});fetchEvents();// Refresh the events list\n}catch(err){console.error(\"Error adding event:\",err);setResult(\"Failed to add event. Please try again.\");}};const handleDelete=async id=>{try{const res=await fetch(`https://nsbe-react-website-backend.onrender.com/api/events/${id}`,{method:\"DELETE\"});if(!res.ok){throw new Error(\"Failed to delete event\");}alert(\"Event deleted successfully!\");fetchEvents();// Refresh the events list\n}catch(err){console.error(\"Error deleting event:\",err);setResult(\"Failed to delete event. Please try again.\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-panel\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Admin Panel\"}),result&&/*#__PURE__*/_jsx(\"p\",{children:result}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:addEventToServer,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"event\",value:inputs.event||\"\",placeholder:\"Event Name\",onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"date\",value:inputs.date||\"\",placeholder:\"Year (YYYY)\",onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:inputs.description||\"\",placeholder:\"Description\",onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"details\",value:inputs.details||\"\",placeholder:\"Details (comma-separated)\",onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"location\",value:inputs.location||\"\",placeholder:\"Location\",onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"attendees\",value:inputs.attendees||\"\",placeholder:\"Number of Attendees\",onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"theme\",value:inputs.theme||\"\",placeholder:\"Theme\",onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"organizer\",value:inputs.organizer||\"\",placeholder:\"Organizer\",onChange:handleChange,required:true}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Upload Image:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"img_name\",accept:\"image/*\",onChange:handleImageChange}),inputs.img_name&&/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(inputs.img_name),alt:\"Preview\",style:{width:\"150px\",marginTop:\"10px\"}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Event List\"}),/*#__PURE__*/_jsx(\"ul\",{children:events.map(event=>/*#__PURE__*/_jsxs(\"li\",{children:[event.event,\" - \",event.location,\" (\",event.date,\")\",\" \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(event._id),children:\"Delete\"})]},event._id))})]});}export default AdminPage;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","AdminPage","events","setEvents","inputs","setInputs","result","setResult","fetchEvents","res","fetch","ok","Error","statusText","data","json","err","console","error","handleChange","e","name","target","value","prevInputs","handleImageChange","file","files","addEventToServer","preventDefault","formData","FormData","key","append","method","body","handleDelete","id","alert","className","children","onSubmit","type","event","placeholder","onChange","required","date","description","details","location","attendees","theme","organizer","accept","img_name","src","URL","createObjectURL","alt","style","width","marginTop","map","onClick","_id"],"sources":["/home/ricogt/Desktop/CSCE 242/nsbe-react-website/src/pages/AdminPage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nfunction AdminPage() {\n  const [events, setEvents] = useState([]);\n  const [inputs, setInputs] = useState({});\n  const [result, setResult] = useState(\"\");\n\n  // Fetch events from the backend\n  const fetchEvents = async () => {\n    try {\n      const res = await fetch(\"https://nsbe-react-website-backend.onrender.com/api/events\");\n      if (!res.ok) {\n        throw new Error(`Failed to fetch events: ${res.statusText}`);\n      }\n      const data = await res.json();\n      setEvents(data);\n    } catch (err) {\n      console.error(\"Error fetching events:\", err);\n      setResult(\"Failed to load events. Please try again.\");\n    }\n  };\n\n  // Fetch events on component mount\n  useEffect(() => {\n    fetchEvents();\n  }, []);\n\n  // Handle text input changes\n  const handleChange = (e) => {\n    const name = e.target.name;\n    const value = e.target.value;\n    setInputs((prevInputs) => ({ ...prevInputs, [name]: value }));\n  };\n\n  // Handle image file selection\n  const handleImageChange = (e) => {\n    const name = e.target.name;\n    const file = e.target.files[0];\n    setInputs((prevInputs) => ({ ...prevInputs, [name]: file }));\n  };\n\n  // Add event to server\n  const addEventToServer = async (e) => {\n    e.preventDefault();\n    setResult(\"Sending...\");\n\n    const formData = new FormData();\n    for (const key in inputs) {\n      formData.append(key, inputs[key]);\n    }\n\n    try {\n      const res = await fetch(\"https://nsbe-react-website-backend.onrender.com/api/events\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      if (!res.ok) {\n        throw new Error(\"Failed to add event\");\n      }\n\n      const data = await res.json();\n      setResult(\"Event successfully added!\");\n      setInputs({});\n      fetchEvents(); // Refresh the events list\n    } catch (err) {\n      console.error(\"Error adding event:\", err);\n      setResult(\"Failed to add event. Please try again.\");\n    }\n  };\n\n  const handleDelete = async (id) => {\n    try {\n      const res = await fetch(`https://nsbe-react-website-backend.onrender.com/api/events/${id}`, {\n        method: \"DELETE\",\n      });\n\n      if (!res.ok) {\n        throw new Error(\"Failed to delete event\");\n      }\n\n      alert(\"Event deleted successfully!\");\n      fetchEvents(); // Refresh the events list\n    } catch (err) {\n      console.error(\"Error deleting event:\", err);\n      setResult(\"Failed to delete event. Please try again.\");\n    }\n  };\n\n  return (\n    <div className=\"admin-panel\">\n      <h1>Admin Panel</h1>\n      {result && <p>{result}</p>}\n\n      <form onSubmit={addEventToServer}>\n        <input\n          type=\"text\"\n          name=\"event\"\n          value={inputs.event || \"\"}\n          placeholder=\"Event Name\"\n          onChange={handleChange}\n          required\n        />\n        <input\n          type=\"text\"\n          name=\"date\"\n          value={inputs.date || \"\"}\n          placeholder=\"Year (YYYY)\"\n          onChange={handleChange}\n          required\n        />\n        <textarea\n          name=\"description\"\n          value={inputs.description || \"\"}\n          placeholder=\"Description\"\n          onChange={handleChange}\n          required\n        />\n        <input\n          type=\"text\"\n          name=\"details\"\n          value={inputs.details || \"\"}\n          placeholder=\"Details (comma-separated)\"\n          onChange={handleChange}\n          required\n        />\n        <input\n          type=\"text\"\n          name=\"location\"\n          value={inputs.location || \"\"}\n          placeholder=\"Location\"\n          onChange={handleChange}\n          required\n        />\n        <input\n          type=\"number\"\n          name=\"attendees\"\n          value={inputs.attendees || \"\"}\n          placeholder=\"Number of Attendees\"\n          onChange={handleChange}\n          required\n        />\n        <input\n          type=\"text\"\n          name=\"theme\"\n          value={inputs.theme || \"\"}\n          placeholder=\"Theme\"\n          onChange={handleChange}\n          required\n        />\n        <input\n          type=\"text\"\n          name=\"organizer\"\n          value={inputs.organizer || \"\"}\n          placeholder=\"Organizer\"\n          onChange={handleChange}\n          required\n        />\n        <div>\n          <label>Upload Image:</label>\n          <input\n            type=\"file\"\n            name=\"img_name\"\n            accept=\"image/*\"\n            onChange={handleImageChange}\n          />\n          {inputs.img_name && (\n            <img\n              src={URL.createObjectURL(inputs.img_name)}\n              alt=\"Preview\"\n              style={{ width: \"150px\", marginTop: \"10px\" }}\n            />\n          )}\n        </div>\n        <button type=\"submit\">Submit</button>\n      </form>\n\n      <h2>Event List</h2>\n      <ul>\n        {events.map((event) => (\n          <li key={event._id}>\n            {event.event} - {event.location} ({event.date}){\" \"}\n            <button onClick={() => handleDelete(event._id)}>Delete</button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nexport default AdminPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}